<div class="relative">
  <div class="grid h-screen grid-cols-3 gap-6">
    @for ( product of filteredProducts; track product.productId) {
    <app-product-card
      [product]="product"
      (click)="selectProduct(product)"
    ></app-product-card>
    }
  </div>
  <div class="absolute left-0 right-0 flex justify-center mt-8 bottom-1">
    <button
      class="px-3 py-1 mx-1 bg-gray-700 rounded"
      (click)="goToFirstPage()"
      [disabled]="currentPage === 1"
    >
      First Page
    </button>
    <button
      *ngFor="let page of [].constructor(totalPages); let i = index"
      class="px-3 py-1 mx-1"
      [ngClass]="{
        'bg-orange-500': currentPage === i + 1,
        'bg-gray-700': currentPage !== i + 1
      }"
      (click)="changePage(i + 1)"
    >
      {{ i + 1 }}
    </button>
    <button
      class="px-3 py-1 mx-1 bg-gray-700 rounded"
      (click)="goToLastPage()"
      [disabled]="currentPage === totalPages"
    >
      Last Page
    </button>
  </div>

  <!-- Product Details Modal -->
<div *ngIf="selectedProduct" class="fixed inset-0 z-50 flex items-center justify-center">
  <!-- Blurred Background -->
  <div class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm"></div>

  <!-- Product Details Content -->
  <div class="relative z-10 max-w-4xl p-6 bg-white shadow-2xl rounded-2xl md:flex-row md:space-y-0 md:space-x-10">
    <!-- Close Button -->
    <button (click)="closeProductDetails()" class="absolute text-3xl text-gray-500 top-2 right-2">
      &times;
    </button>

    <!-- Global Container -->
    <div class="flex flex-col md:flex-row">
      <!-- Product Image -->
      <div class="flex items-center justify-center">
        <img [src]="selectedProduct?.imageUrl" alt="Product Image" class="duration-200 w-60 hover:scale-105" />
      </div>

      <!-- Product Details -->
      <div class="flex flex-col p-6 space-y-6">
        <!-- Label and Description -->
        <div class="flex flex-col items-center space-y-3 text-center md:text-left">
          <div class="inline-block px-3 py-1 text-sm text-white bg-black rounded-full">Free Shipping</div>
          <div class="max-w-sm text-2xl font-medium">{{ selectedProduct?.productName }}</div>
        </div>

        <!-- Price Container -->
        <div class="flex flex-col items-center space-y-3 text-center md:text-left">
          <p class="text-gray-400 line-through">Rs.{{ selectedProduct?.pricePerUnit| number }}/=</p>
          <p class="text-5xl font-bold">Rs.{{ selectedProduct?.pricePerUnit | number }}/=</p>
          <p class="text-sm font-light text-gray-400">This offer is valid until April 3rd or as long as stock lasts!</p>
        </div>

        <!-- Button Group -->
        <div class="group">
          <button class="w-full text-white duration-150 bg-blue-700 border border-b-8 rounded-lg border-b-blue-700 transition-full group-hover:border-t-8 group-hover:border-b-0 group-hover:bg-blue-700 group-hover:border-t-blue-700 group-hover:shadow-lg">
            <div class="px-8 py-4 bg-blue-500 rounded-lg group-hover:bg-blue-700">Add to Cart</div>
          </button>
        </div>

        <!-- Stock Information -->
        <div class="flex items-center space-x-3 group">
          <div class="w-3 h-3 bg-green-400 rounded-full group-hover:animate-ping"></div>
          <div class="text-sm">{{ selectedProduct?.quantity }} pcs. in stock</div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col space-y-4 md:space-y-0 md:space-x-4 md:flex-row">
          <button class="flex items-center justify-center py-3 px-5 space-x-3 border-2 border-gray-300 rounded-lg shadow-sm hover:bg-opacity-30 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-150">
            <img src="assets/cart.png" alt="" class="w-8 mr-3" /> Add to Cart
          </button>
          <button class="flex items-center justify-center py-3 px-5 space-x-3 border-2 border-gray-300 rounded-lg shadow-sm hover:bg-opacity-30 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-150">
            <img src="assets/heart.png" alt="" class="w-8 mr-3" /> Add to Wishlist
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
