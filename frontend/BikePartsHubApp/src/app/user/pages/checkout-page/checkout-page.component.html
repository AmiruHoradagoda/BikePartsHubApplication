<!-- checkout-page.component.html -->
<div class="min-h-screen bg-gray-50">
  <!-- Header Banner -->
  <div class="text-white bg-blue-600">
    <div class="px-4 py-12 mx-auto max-w-7xl">
      <h1 class="text-3xl font-bold">Checkout</h1>
      <p class="mt-2 text-blue-100">Complete your order</p>
    </div>
  </div>

  <!-- Main Content -->
  <div class="px-4 py-8 mx-auto max-w-7xl">
    <div class="flex flex-col gap-8 lg:flex-row">
      <!-- Checkout Form Section -->
      <div class="flex-grow space-y-6">
        <!-- Error Alert -->
        <div *ngIf="error" 
             class="p-4 text-red-500 bg-red-100 border border-red-200 rounded-xl">
          {{ error }}
        </div>

        <form [formGroup]="checkoutForm" (ngSubmit)="handleCheckout()">
          <!-- Shipping Address -->
          <div class="p-6 bg-white shadow-sm rounded-xl" formGroupName="shippingAddress">
            <h2 class="text-xl font-bold text-gray-900">Shipping Address</h2>
            <div class="grid grid-cols-1 gap-6 mt-6 md:grid-cols-2">
              <div class="flex flex-col">
                <input
                  formControlName="address"
                  type="text"
                  placeholder="Address Line"
                  class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  [class.border-red-500]="checkoutForm.get('shippingAddress.address')?.touched && 
                                        checkoutForm.get('shippingAddress.address')?.invalid"
                />
                <span class="mt-1 text-sm text-red-500" 
                      *ngIf="checkoutForm.get('shippingAddress.address')?.touched && 
                             checkoutForm.get('shippingAddress.address')?.invalid">
                  Address is required
                </span>
              </div>

              <div class="flex flex-col">
                <input
                  formControlName="postalCode"
                  type="text"
                  placeholder="Postal Code"
                  class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  [class.border-red-500]="checkoutForm.get('shippingAddress.postalCode')?.touched && 
                                        checkoutForm.get('shippingAddress.postalCode')?.invalid"
                />
                <span class="mt-1 text-sm text-red-500" 
                      *ngIf="checkoutForm.get('shippingAddress.postalCode')?.touched && 
                             checkoutForm.get('shippingAddress.postalCode')?.invalid">
                  Enter valid postal code
                </span>
              </div>

              <input
                formControlName="city"
                type="text"
                placeholder="City"
                class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />

              <input
                formControlName="state"
                type="text"
                placeholder="Province"
                class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />

              <input
                formControlName="district"
                type="text"
                placeholder="District"
                class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>
          </div>

          <!-- Payment Method -->
          <div class="p-6 mt-6 bg-white shadow-sm rounded-xl">
            <h2 class="text-xl font-bold text-gray-900">Payment Method</h2>
            <div class="grid grid-cols-2 gap-4 mt-6">
              <button type="button" 
                      class="p-4 text-center border border-gray-200 rounded-lg hover:border-blue-500 hover:text-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <span class="block text-lg font-medium">Cash on Delivery</span>
                <span class="text-sm text-gray-500">Pay when you receive</span>
              </button>
              <button type="button" 
                      class="p-4 text-center border border-gray-200 rounded-lg hover:border-blue-500 hover:text-blue-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <span class="block text-lg font-medium">Online Payment</span>
                <span class="text-sm text-gray-500">Card, UPI, Net Banking</span>
              </button>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="grid gap-4 mt-8">
            <button 
              type="submit" 
              [disabled]="!checkoutForm.valid || loading"
              class="w-full py-4 font-medium text-white transition-colors bg-blue-600 rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed">
              <span *ngIf="loading" class="inline-block w-4 h-4 mr-2 border-2 border-white rounded-full border-t-transparent animate-spin"></span>
              {{ loading ? 'Processing...' : 'Place Order' }}
            </button>
            <button 
              type="button" 
              [routerLink]="['/cart']"
              class="w-full py-4 font-medium text-gray-700 transition-colors bg-gray-100 rounded-full hover:bg-gray-200">
              Back to Cart
            </button>
          </div>
        </form>
      </div>

      <!-- Order Summary Card -->
      <div class="lg:w-96">
        <div class="sticky p-6 bg-white shadow-sm rounded-xl top-8">
          <h2 class="text-xl font-bold text-gray-900">Order Summary</h2>
          
          <!-- Items List -->
          <div class="mt-6 space-y-4">
            <div *ngFor="let item of cartItems" class="flex justify-between py-2">
              <div class="flex items-center gap-3">
                <img [src]="item.imageUrl" 
                     [alt]="item.name" 
                     class="w-12 h-12 rounded-lg">
                <div>
                  <p class="text-gray-900">{{item.name}}</p>
                  <p class="text-sm text-gray-500">Qty: {{item.quantity}}</p>
                </div>
              </div>
              <span class="font-medium text-gray-900">Rs.{{item.unitPrice * item.quantity}}</span>
            </div>
          </div>

          <!-- Cost Breakdown -->
          <div class="pt-4 mt-6 space-y-4 border-t border-gray-100">
            <div class="flex justify-between text-gray-600">
              <span>Subtotal</span>
              <span class="font-medium">Rs.{{total}}</span>
            </div>
            <div class="flex justify-between text-gray-600">
              <span>Shipping</span>
              <span class="font-medium">Rs.60.00</span>
            </div>
            <div class="flex justify-between text-gray-600">
              <span>Tax</span>
              <span class="font-medium">Rs.60.00</span>
            </div>
            
            <!-- Total -->
            <div class="pt-4 mt-4 border-t border-gray-100">
              <div class="flex justify-between">
                <span class="text-lg font-bold text-gray-900">Total</span>
                <span class="text-2xl font-bold text-blue-600">Rs.{{total + 120}}</span>
              </div>
            </div>
          </div>

          <!-- Security Badge -->
          <div class="flex items-center justify-center gap-2 mt-6 text-sm text-gray-500">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
            </svg>
            Secure checkout
          </div>
        </div>
      </div>
    </div>
  </div>
</div>